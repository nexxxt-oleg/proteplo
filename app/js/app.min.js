document.addEventListener("DOMContentLoaded", () => {


    if (document.getElementById('homeSlider1')) {
        new Swiper('#homeSlider1', {
            spaceBetween: 30,
            loop: true,
            pagination: {
                el: '#homeSlider1 .home-sliders__pagination',
                clickable: true,
            },
        });
    }
    if (document.getElementById('homeSlider2')) {
        new Swiper('#homeSlider2', {
            spaceBetween: 30,
            loop: true,
            pagination: {
                el: '#homeSlider2 .home-sliders__pagination',
                clickable: true,
            },
        });
    }
    if (document.getElementById('newsSlider')) {
        const sliderBrands = new Swiper('#newsSlider', {
            spaceBetween: 30,
            slidesPerView: 3,
            slidesPerGroup: 1,
            navigation: {
                nextEl: '#newsSliderNext',
                prevEl: '#newsSliderPrev',
            },

            breakpoints: {
                300: {
                    slidesPerView: 1,
                    spaceBetween: 15
                },
                600: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 20
                },
                1200: {
                    slidesPerView: 3,
                    spaceBetween: 30
                },
            },

        });
    }

    let sliderProduct = document.querySelectorAll(".slider-product");

    sliderProduct.forEach(function (sliderItem) {
        let nextBtn = '#' + sliderItem.dataset.next;
        let prevBtn = '#' + sliderItem.dataset.prev;

        new Swiper(sliderItem, {
            spaceBetween: 30,
            slidesPerView: 4,
            slidesPerGroup: 1,
            navigation: {
                nextEl: nextBtn,
                prevEl: prevBtn,
            },

            breakpoints: {
                300: {
                    slidesPerView: 1,
                    spaceBetween: 15
                },
                600: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                991: {
                    slidesPerView: 3,
                    spaceBetween: 20
                },
                1200: {
                    slidesPerView: 4,
                    spaceBetween: 30
                },
            },

        });
    });

    if (document.getElementById('sliderBrand')) {
        new Swiper("#sliderBrand", {
            slidesPerView: 6,
            grid: {
                rows: 2,
            },
            spaceBetween: 30,
            lazy: true,
            navigation: {
                nextEl: '#sliderBrandNext',
                prevEl: '#sliderBrandPrev',
            },
        });
    }
    if (document.getElementById('sliderNews')) {
        new Swiper("#sliderNews", {
            slidesPerView: 3,
            spaceBetween: 30,
            lazy: true,
            navigation: {
                nextEl: '#sliderNewsNext',
                prevEl: '#sliderNewsPrev',
            },
        });
    }


    const widthScreen = window.innerWidth || document.documentElement.clientWidth ||
        document.body.clientWidth;

    if (document.getElementById('seoText')) {
        new Readmore('#seoText', {
            collapsedHeight: 225,
            moreLink: '<div class="seo-text__footer"><a href="" class="btn-link">' +
                'Подробнее <svg width="12" height="6" class="ml-5">\n' +
                '                    <use xlink:href="#svg-bottom"></use>\n' +
                '                </svg></a></div>',
            lessLink: '<div class="seo-text__footer"><a href="" class="btn-link">' +
                'Скрыть <svg width="12" height="6" class="ml-5">\n' +
                '                    <use xlink:href="#svg-up"></use>\n' +
                '                </svg></a></div>',
        });
    }

    function getScrollMenu() {
        let el = document.body;
        if (pageYOffset > 300) {
            el.classList.add('fix_menu');
        } else {
            el.classList.remove("fix_menu");
        }
    }

    getScrollMenu();
    window.addEventListener('scroll', function () {
        getScrollMenu();
    });

    if (document.getElementById('searchBox')) {
        let searchBox = document.getElementById('searchBox');
        let searchHeader = document.getElementById('searchHeader');
        let searchBoxRemove = document.getElementById('searchBoxRemove');

        searchBox.addEventListener("mouseover", () => {
            document.body.classList.add('search_active');
            if (searchHeader.value.length > 0) {
                activeSearch();
            }
        });
        searchBox.addEventListener("mouseout", () => {
            if (document.body.classList.contains('search_active')) {
                document.body.classList.remove('search_active');
            }
            let searchBoxResult = document.getElementById('searchBoxResult');
            if (searchBoxResult.classList.contains('active')) {
                searchBoxResult.classList.remove('active');
            }
        });

        searchHeader.addEventListener("input", () => {
            if (searchHeader.value.length > 0) {
                activeSearch();
            } else {
                clearSearch(event);
            }
        });

        searchBoxRemove.addEventListener("click", clearSearch);
    }
});


function clearSearch(event) {
    let searchBoxRemove = document.getElementById('searchBoxRemove');
    document.getElementById('searchHeader').value = '';
    if (searchBoxRemove.classList.contains('active')) {
        searchBoxRemove.classList.remove('active');
    }
    event.preventDefault();
}

function activeSearch() {
    let searchBoxResult = document.getElementById('searchBoxResult');
    let searchBoxRemove = document.getElementById('searchBoxRemove');
    searchBoxResult.classList.add('active');
    searchBoxRemove.classList.add('active');
}
